<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Secrets of the Browser Developer Tools | All is well</title>
  <meta name="author" content="Rong Nie">
  
  <meta name="description" content="javascript, css, and design">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <meta property="og:title" content="Secrets of the Browser Developer Tools"/>
  <meta property="og:site_name" content="All is well"/>

  <link rel="alternate" href="/atom.xml" title="All is well" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
</head>


<body>
  <div class="wrapper">
    <header id="header"><div class="title">
  <h1><a href="/">All is well</a></h1>
  <p><a href="/">javascript, css, and design</a></p>
</div>
<nav class="nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2013-07-24T18:25:00.000Z"><a href="/2013/07/25/secrets-of-the-browser-developer-tools/">7月 25 2013</a></time>
    
    
  
    <h1 class="title">Secrets of the Browser Developer Tools</h1>
  

  </header>
  
  <div class="entry">
    
      <blockquote>
<p>源网站：<a href="http://devtoolsecrets.com/">Secrets of the Browser Developer Tools</a>  </p>
</blockquote>
<h2>目录</h2>
<ul>
<li>常规<ol>
<li>找到开发工具</li>
<li>用最新的开发版</li>
<li>移动开发工具位置</li>
<li>开发工具调试响应式设计</li>
<li>学习快捷键</li>
</ol>
</li>
<li>Console 控制台<ol>
<li>Log, Info, Debug, Warn, Error</li>
<li>输出数据表格</li>
<li>Assert</li>
<li>使用控制台定时器</li>
<li>持久控制台</li>
<li>重新运行命令</li>
<li>任意 Tab 打开控制台</li>
<li>改变框架焦点</li>
<li>引用当前和前一个元素</li>
<li>最终求值表达式</li>
</ol>
</li>
<li>检查<ol>
<li>通过面包屑导航 DOM</li>
<li>搜索 DOM 节点</li>
<li>检查字体</li>
<li>浏览你的响应式网站</li>
<li>3D 视图</li>
</ol>
</li>
<li>编辑<ol>
<li>改变 CSS 值</li>
<li>改变 :active， :hover， :focus， :visited 状态样式</li>
<li>拖拽重排元素</li>
<li>使用 SASS Source Maps</li>
</ol>
</li>
<li>调试<ol>
<li>用 debugger; 调试</li>
<li>条件断点</li>
<li>DOM 断点</li>
<li>XHR 断点</li>
<li>检查断点的作用域</li>
<li>监控值</li>
<li>调试压缩后的 JavaScript</li>
<li>使用 JavaScript Source Maps</li>
<li>模拟User Agent</li>
<li>模拟触控设备</li>
<li>覆盖地理位置</li>
<li>重写设备方向</li>
<li>调试 Canvas 元素</li>
<li>运行代码片段</li>
</ol>
</li>
<li>性能<ol>
<li>禁用浏览器缓存</li>
<li>排序网络请求找到瓶颈</li>
<li>网络时间轴导出为 HAR 文件</li>
<li>检查 DOMContentLoad 和 Load 事件</li>
<li>重发送 XHR 请求</li>
<li>测量渲染性能和 FPS</li>
</ol>
</li>
<li>移动端<ol>
<li>开发工具调试 IOS</li>
<li>开发工具调试 Android</li>
</ol>
</li>
<li>扩展<ol>
<li>覆盖地理位置</li>
</ol>
</li>
</ul>
<h2>常规</h2>
<h3>找到开发工具</h3>
<p>快捷方式： </p>
<ul>
<li>“F12”（Windows）</li>
<li>“Cmd”⌘ +“Option” +“I”（Mac）</li>
<li>右键选择“Inspect Element 检查元素”</li>
<li>Safari 需要在 首选项 &gt; 高级 &gt; 显示开发菜单，启用开发工具</li>
<li><p>Firebug 是 Firefox 扩展，需要[在此][3]安装</p>
<p>[3]: <a href="http://getfirebug.com/">http://getfirebug.com/</a>
<a name="more"></a></p>
<h3>用最新的开发版</h3>
</li>
</ul>
<p>开发工具会不断完善，在开发版可以体验。 <a href="https://www.google.com/intl/zh-CN/chrome/browser/canary.html">Chrome Canary</a> 是 Chrome 实验版，Canary 和 Chrome 可以同时安装。 你可以通过 <code>chrome://flags</code> 进一步加强你的 Chrome 开发工具 ，启用“Enable Developer Tools experiments （启用开发工具实验）”。不要忘了点击页面底部的“现在重启”按钮。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/c.png" alt=""></p>
<p><a href="http://www.mozilla.org/en-US/firefox/aurora/">Firefox Aurora</a> 提供 Firefox 最新特性预览。不幸的是，Aurora 不能和 Firefox 同时打开。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/f.png" alt=""></p>
<p><a href="http://nightly.webkit.org/">Webkit Nightly</a> 是 Safari 测试版，因此有些不稳定。Webkit Nightly 可以和 Safari 同时运行。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/s.png" alt=""></p>
<p><a href="http://www.opera.com/zh-cn/computer/next">Opera Next</a> 是 Opera 最新改良版，会提供一些新的功能和特性。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/o.png" alt=""></p>
<p>现在浏览器的发布周期为12周，浏览器自动更新，变化是增量的。 </p>
<h3>移动开发工具位置</h3>
<p>有时候不想让我们的工具在屏幕底部，大部分的开发工具提供了配置选项。 </p>
<p>Chrome 开发工具，左下角图标允许改变停靠设置。快速点击它，会在底部和右侧切换。长按可以选择停靠选项（独立窗口打开），你也可以点击并拖拽移动开发工具。 </p>
<p>Firefox 和 Safari 开发工具，停靠选项在右上角临近关闭按钮的位置，可以新窗口打开。 </p>
<p>要改变停靠位置，可点击左上角小虫子，选择 Firebug 界面位置（上/下/左/右）。Firebug 右上角可以快速选择：最小化，新窗口，关闭。 </p>
<h3>开发工具调试响应式设计</h3>
<p>当调试移动站点的时候，停靠在右侧可充分利用空间，并且可以快速调整浏览器视口和开发工具的宽度，调试不同网页宽度。 </p>
<p>在 Chrome 开发工具左下角，点击按钮可切换下侧或右侧停靠位置。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/dock.png" alt=""></p>
<p>在 Chrome 开发工具右下角，点击并选择“General”标签，你可以改变工具的外观，停靠右侧时可以垂直显示面板。 </p>
<h3>学习快捷键</h3>
<p>Chrome 的快捷键列在设置菜单里，点击右下“齿轮”图标，可以看到“Shortcuts”标签。 </p>
<p>IE 的快捷键是<a href="http://msdn.microsoft.com/en-us/library/dd565630(v=vs.85">在线的</a>.aspx) 。 </p>
<p>Opera 的快捷键也在设置按钮里。 </p>
<h2>Console 控制台</h2>
<h3>Log, Info, Debug, Warn, Error</h3>
<p>不必用 alert 时，console.log() 是个极其有用的输出调试工具； </p>
<p>console.log() 是 printf 风格，因此你可以这么做：<code>console.log(&quot;%s is %d years old.&quot;, &quot;Bob&quot;, 42)</code>。 </p>
<p>可以用 <code>console.info()</code> 输出提示信息；<code>console.debug()</code> 输出调试信息；<code>console.warn()</code> 输出警示信息；<code>console.error()</code> 输出错误信息。 </p>
<p>你还可以用 %c 模式，把第二个变量作为样式格式参数。例如： </p>
<pre><code><figure class="highlight"><pre><span class="tag">console</span><span class="class">.log</span>("%<span class="tag">cThis</span> <span class="tag">is</span> <span class="tag">green</span> <span class="tag">text</span> <span class="tag">on</span> <span class="tag">a</span> <span class="tag">yellow</span> <span class="tag">background</span>.", "<span class="tag">color</span><span class="pseudo">:green</span>; <span class="tag">background</span>-<span class="tag">color</span><span class="pseudo">:yellow")</span>;
</pre></figure></code></pre>
<p>Firebug 只不过显示的图标不同，消息的背景色是一致的。 </p>
<p>根据 MDN 的消息，他们不赞成使用 console.debug() ，因此没有图标标识，赞成用 console.log() 代替。 </p>
<p>Chrome 和 Safari（nightly）用 info 时不显示图标，用 debug 时显示蓝图标；用 warn 时显示黄图标；用 error 时显示红图标。 </p>
<p>你可以输出多个值，用逗号隔开即可，方便在同一行输出对象和数组，例如：<code>console.log(&#39;Kings: &#39;, kings);</code></p>
<h3>输出数据表格</h3>
<p>console.table() 可以用来输出数组或者对象列表，以一种合适的表格形式显示。 </p>
<p>例如：<code>console.table([[10, true, &quot;blue&quot;],[5, false]])</code> 将输出以下格式： </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/chrome-table.png" alt=""></p>
<p>如果元素的数量不匹配，表格将显示 <code>undefined</code> 表示没有数据。 </p>
<p>自定义列名，属性名必须在对象中指定元素。自定义（<code>index</code>）的值，可以给每个属性命名。 </p>
<p>第二个可选的变量允许你明确指定哪一列要输出。 </p>
<pre><code><figure class="highlight"><pre>console.table({
  <span class="comment">"London"</span>:{<span class="method">population:</span><span class="number">8173194</span>, <span class="method">country:</span><span class="comment">"UK"</span>, <span class="method">elevation:</span><span class="comment">"24m"</span>},
  <span class="comment">"New York"</span>:{<span class="method">population:</span><span class="number">8336697</span>, <span class="method">country:</span><span class="comment">"USA"</span>, <span class="method">elevation:</span><span class="comment">"10m"</span>}},
  [<span class="comment">"population"</span>, <span class="comment">"country"</span>])
</pre></figure></code></pre>
<p>结果如下： </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/chrome-table-custom-headings.png" alt=""></p>
<h3>Assert</h3>
<p>console.assert() 用于测试表达式的真假。 </p>
<p>它有两个参数：表达式和显示信息。如果表达式是 FALSE 时，信息将会显示。 </p>
<p>例如：<code>console.assert(!true, &#39;This is not true&#39;);</code> 输出”This is not true”。<code>console.assert(true, &#39;This is not true&#39;);</code> 什么也不输出。 </p>
<h3>使用控制台定时器</h3>
<p>使用 <code>console.time(label)</code>，定时器在控制台启动。字符串 <code>label</code> 是必须的，我们想停止它时，有个定时器引用。调用 <code>console.timeEnd(label)</code> 定时器停止，控制台输出定时器执行的毫秒数（通过 label 识别）。 </p>
<h3>持久控制台</h3>
<p>有时页面加载时，你需要保留控制台信息。有时在点击或离开页面时，我们需要这个作为参考或者用来查看日志。 </p>
<p>在 Chrome 里，右键点击控制台，显示菜单里有“Preserve Log upon Navigation”，选择它将保存你的控制台内容。 </p>
<p>Firefox 默认会保存控制台信息。你可以点击右上角“清除”按钮清除控制台日志，或者打开/关闭工具。 </p>
<p>在 Firebug 里，有个显著的按钮用来保持控制台内容，就在控制台的上部。 </p>
<p>Opera 默认保存控制台内容，你可以右键选择“clear console”清除控制台日志或者重开工具。 </p>
<h3>重新运行命令</h3>
<p>如果已经在 JavaScript 控制台输入过命令，你想重新运行它，简单点一下“上”箭头即可翻看原先的命令列表。 </p>
<h3>任意 Tab 打开控制台</h3>
<p>在 Chrome ，尽管控制台有自己的 tab ，在任意 tab 按下“ESC”键即可打开控制台，因此不必切换 tab 了。 </p>
<p>Safari 控制台在开发工具的底部，“ESC”键用来切换控制台日志的可见性。在命令行执行一个命令也将打开控制台日志。 </p>
<p>在 Firefox ，快速切换到控制台：“Ctrl + Shift + K ”（Windows），“Cmd ⌘ + Option ⌥ + K ”（Mac）。 </p>
<h3>改变框架焦点</h3>
<p>用命令行运行 JavaScript 非常实用，但是如果页面有 iframe ，你又不知道如何定位框架，就不好办了。 </p>
<p>在 Firebug ，你可以用下面的命令聚焦框架： cd(window.frames[‘frameName’]); </p>
<p>Chrome 可以在控制台底部的下拉列表中改变框架。 </p>
<p>Opera 在“Console 控制台”和“Documents 文档” 有个改变框架的下拉菜单。 </p>
<p>你可以通过 <code>document.getElementsByTagName(&quot;iframe&quot;);</code> 获得 iframe 列表。 </p>
<h3>引用当前和前一个元素</h3>
<p>如果你的“Elements”标签选择了一个元素，你可以用 <code>$0</code> 调用它。输入 <code>$0.innerHTML</code> 试试看。 </p>
<p>在 Firebug 和 Opera，你可以用 <code>$1</code> 选择前一个元素。 </p>
<p>在 Chrome 和 Safari，你可以通过 <code>$1 - $4</code> 选择更靠前的元素。 </p>
<p>在 Firebug ，你可以通过 <code>$n(2) - $n(5)</code> 选择更靠前的元素。 </p>
<h3>最终求值表达式</h3>
<p>如果你需要先前表达式的结果用于后面的求值，你可以使用便利 <code>$_</code> ，最终表达式结果自动展示给你。 </p>
<p>Firebug 1.12 开始支持。 </p>
<h2>检查</h2>
<h3>通过面包屑导航 DOM</h3>
<p>当你检查 DOM 树的节点时，节点的 DOM 路径面包屑列表显示在开发工具里。 </p>
<p>Chrome 和 Opera，显示在 DOM 检查器的底部。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/chrome-breadcrumbs.png" alt=""></p>
<p>Firebug，Firefox 和 Safari，显示在 DOM 检查器的顶部。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/firefox-breadcrumbs.png" alt=""></p>
<p>你可以直接点击节点，或者按箭头键导航面包屑。按左箭头是父节点，按右箭头是第一个子项。上下箭头导航到下一个或前一个子节点。没有更多子节点，上下箭头导航回到 DOM 树。 </p>
<p>在 Firefox ，你可以右击面包屑看兄弟节点列表，可以快速导航到兄弟节点。 </p>
<p>在 Safari，你可以左击面包屑看兄弟节点。 </p>
<h3>搜索 DOM 节点</h3>
<p>在 Firefox ，你可以在“检查器”面板搜索特别的节点。面包屑右边有个小的搜索框有同样作用。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/firefox-inspect-search-for-dom-nodes-small.png" alt=""></p>
<p>聚焦时搜索框变大。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/firefox-inspect-search-for-dom-nodes-large.png" alt=""></p>
<p>输入一个匹配的选择器， DOM 树将自动高亮它。 </p>
<p>在 Chrome ，你可以按 Ctrl-F 打开对话框，CSS 选择器如期工作。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/L4xYPvn.png" alt=""></p>
<h3>检查字体</h3>
<p>Firefox 有个字体检查器，可以查看当前元素使用的字体。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/firefox-inspect-fonts.png" alt=""></p>
<p>你可以修改默认的“Abc”文字，在字体列表底部有个按钮，可以显示页面所有字体。 </p>
<h3>浏览你的响应式网站</h3>
<p>在响应式设计时代，最重要的是如何在任意尺寸的设备查看我们的网站。尽管我们可以调整浏览器大小，开发工具里还是有一些其它的工具可用。 </p>
<p>在 Chrome 开发工具的“设置”面板（工具右下角点击齿轮），在“Overrides”标签，你会发现“Device Metrics 设备指标”选项，你可以指定宽度和高度，以及字体缩放尺寸。你可以把开发工具停靠在右侧，然后调整页面大小测试。 </p>
<p>Firefox 开发工具内置一个‘响应式设计模式’工具，此工具在开发工具的右上角。它包含一些预设的尺寸，你可以添加需要的尺寸。Firefox 也提供旋转的选项，你可以测试 landscape 和 portrait 模式。 </p>
<h3>3D 视图</h3>
<p>Firefox 开发工具可以 3D 视图查看你的网站，可以方便地查看元素嵌套关系，点击开发工具右上角立方体图标可以启动它。 </p>
<h2>编辑</h2>
<h3>改变 CSS 值</h3>
<p>如果有个元素需要修改 margin，padding，width 或者 height，可以使用方向键增加/减少尺寸。简单使用上下方向键增加/减少1个单位。 </p>
<p>“Shift” + 上下方向键，可以增加/减少10个单位；“Alt” + 上下方向键，可以增加/减少0.1个单位。 </p>
<p>“Shift” + Page-Up / Page-Down，可以增加/减少100个单位。 </p>
<p>当你矫正尺寸时，这些快捷键非常实用。 </p>
<h3>改变 :active， :hover， :focus， :visited 状态样式</h3>
<p>在开发工具里修改 CSS 非常爽，但是碰到 hover 之类的伪类就有点挠头了。恰好有解决方案。 </p>
<p>Chrome 有个按钮是干这用的，在“Elements”标签右手边看到一个虚线框和光标在一起的图标，它可以切换其它状态。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/chrome-active-hover-focus-visited.png" alt=""></p>
<p>Firebug 的 HTML 标签右侧，点击样式小箭头，可以选择想要的状态。Firebug 并没提供 :visited 状态选项。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/firebug-active-hover-focus-visited.png" alt=""></p>
<p>Firefox 为你选择的 DOM 元素提供一个下拉菜单，右键选择“查看元素”可以看到它，Firefox 同样没提供 :visited 状态选项。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/firefox-active-hover-focus-visited.png" alt=""></p>
<p>在 Opera，“样式”标签有个像列表的图标，Opera 提供了 :link 和 ::selection 选项。在新版 Opera ，位置跟 Chrome 一致了。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/opera-active-hover-focus-visited.png" alt=""></p>
<p>在 Safari，DOM 上右击一个元素，显示一个菜单，里面有“Force Psuedo-Classes”选项。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/safari-active-hover-focus-visited.png" alt=""></p>
<h3>拖拽重排元素</h3>
<p>在 Chrome 和 Safari 里，，“Elements”标签下，可以拖拽重排元素顺序。简单点击拖动元素即可，目标位置会出现一条线。 </p>
<h3>使用 SASS Source Maps</h3>
<p>使用 CSS 预处理器有许多优势，但是在浏览器开发工具中修改比较困难。例如，当你再次运行 SASS 时， 在开发工具中保存的编译后CSS 可能被覆盖，不太理想。SASS 3.3 以上（可以安装使用‘sass gem install sass –pre’），为 SASS 文件创建映射很容易，你可以很容易的保存修改。 </p>
<p>首先，为 SASS watch 命令增加 <code>--sourcemap</code> ，像这样： </p>
<pre><code><figure class="highlight"><pre><span class="comment">sass</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">watch</span> <span class="comment">scss/devtoolsecrets</span>.<span class="comment">scss:css/devtoolsecrets</span>.<span class="comment">min</span>.<span class="comment">css</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">style</span> <span class="comment">compressed</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">sourcemap
</pre></figure></code></pre>
<p>然后在 SASS 文件底部添加映射文件的名字（sourceMappingURL）： </p>
<pre><code><figure class="highlight"><pre><span class="number">1</span>



/<span class="variable">*@</span> sourceMappingURL=devtoolsecrets.css.<span class="keyword">map</span> <span class="variable">*/</span>
</pre></figure></code></pre>
<p>然后，你需要启用“Experiments 实验”。地址栏输入 <strong>chrome://flags</strong> 启用“启用开发者工具实验”选项，点击页面底部“马上重启”按钮应用改变。在 Chrome 开发工具的右下角，点击齿轮按钮打开“设置”面板。 </p>
<p>点击“General 常规”标签，激活“Enable Source Maps 启用 Source Maps”。点击“Experiments 实验”标签，检查“Support for SASS 支持 SASS ”选项。 </p>
<p>重启浏览器，你可以直接查看 SASS 文件的行号了。 </p>
<h2>调试</h2>
<h3>用 debugger; 调试</h3>
<p>添加此行代码：<code>debugger;</code> 可以自动创建断点，当开发工具打开时运行，断点会自动创建。 </p>
<p>尽管快速添加断点很方便，不用在开发工具一行一行找，小心不要把 debugger; 提交到线上环境。 </p>
<h3>条件断点</h3>
<p>不必每次生效时，条件断点很有用。例如，你知道你的代码在最后一项有 bug，你可以用条件判断在最后一项时激活 debugger。条件满足，断点触发。 </p>
<p>在 Chrome 中创建条件断点，先创建个正常的断点，然后右击断点选择“编辑断点”添加条件。 </p>
<p>在 Firebug ，先创建常规断点，然后右击出现输入框，可以添加条件。 </p>
<p>在 Firefox ，右击想创建断点的行，选择“增加条件断点”。 </p>
<p>在 IE，先创建常规断点，然后右击断点，选择“条件…”。 </p>
<p>在 Opera，先创建常规断点，然后右击断点，选择“添加条件”。 </p>
<p>在 Safari，确保脚本和“调试器”面板都打开，创建一个断点，然后在“调试器”面板右击同样的断点，选择“编辑断点”。 </p>
<h3>DOM 断点</h3>
<p>如果特定的 DOM 改变，你的页面会被破坏，或者你只想找出元素属性或子元素改变，哪些代码生效，Chrome 和 Firebug 均可以在 DOM 修改时设置断点，你可以找到代码问题的根源。简单点击你想监控的元素，右击选择“break on”选项。 </p>
<h3>XHR 断点</h3>
<p>在 Chrome ，可以为 XmlHttpRequest 设置断点，你可以调试 AJAX 请求。到“Sources”标签选择“XHR 断点”，点击右侧加号图标，输入部分或所有你想添加断点的 URL 。一旦请求返回，断点将生效，你可以看到返回的数据，并可单步调试后续操作。 </p>
<p>取消勾选可以关掉断点，右键选择“Delete Breakpoint 删除断点”删除断点。 </p>
<p>在 Firebug ，到网络标签选择“在 XHR 时中断”按钮，或者右键选择“在 XHR 时中断”，你也可以随意选择中断条件。 </p>
<h3>检查断点的作用域</h3>
<p>在 Chrome ，Javascript 在断点处暂停时，你可以查看当前作用域的所有变量和对象，既可以悬浮查看，也可以通过控制台查看。 </p>
<p>Firebug 有同样的选项，但是需要在 DOM 菜单选择“show closures”。 如果断点设置恰当，这个强大的属性让你很容易查看闭包里的变量。 </p>
<p>Firebug 有额外的功能，无需在断点停止，即可访问隐藏的闭包变量。看此例： </p>
<pre><code><figure class="highlight"><pre><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name)</span> {</span>
  <span class="keyword">this</span>.introduce = <span class="keyword">function</span>() {
      console.log(<span class="string">"Hello, my name is %s"</span>, name);
  }
}
<span class="comment">// create an instance of Person: var someone = new Person("Arthur"); </span>
<span class="comment">// we call a closure! someone.introduce(); </span>
<span class="comment">// prints "Hello, my name is Arthur" </span>
</pre></figure></code></pre>
<p>代码访问以下闭包变量： <strong>closure.%variable</strong> 以上例子，你将用这个表达式访问 name： <strong>someone.introduce.%name // ==&gt; “Arthur”</strong> 注意你也可以改变值： </p>
<pre><code><figure class="highlight"><pre>someone<span class="variable">.introduce</span>.%name = <span class="string">"Trillian"</span>; someone<span class="variable">.introduce</span>(); <span class="comment">// prints "Hello, my name is Trillian"</span>
</pre></figure></code></pre>
<p>Firebug 中，需要 JavaScript 的地方，同样的语法都会生效，例如监控面板和条件断点。 </p>
<h3>监控值</h3>
<p>在“脚本”标签的右上角，监控变量相当容易，只有输入变量名，“监控”将让它的值保持更新。 </p>
<h3>调试压缩后的 JavaScript</h3>
<p>下断点让 JavaScript 调试更容易，但是如果代码已经放到生成环境，很可能已被压缩。如何调试最小化的代码呢？庆幸的是一些浏览器已经支持解压你的 JavaScript 。 </p>
<p>在 Chrome 和 Safari ，选择“脚本”标签，找到相应的文件，然后点击“{}”图标（pretty print，在面板底部）。 </p>
<p>在 IE ，点击工具图标选择下拉菜单，找到格式化 JavaScript 选项。 </p>
<p>Opera 自动格式化压缩的 JavaScript 。 </p>
<h3>使用 JavaScript Source Maps</h3>
<p>当我们部署代码到生产环境时，比较明智的是压缩代码减少加载时间。压缩去除了无用的字符（比如注释），空行和空格。可是压缩后很难调试，无法单步调试，代码不易读。JavaScript source maps 调试压缩后 JavaScript 文件非常有用，它提供一个映射关联到未压缩文件。 </p>
<p>创建 JavaScript source maps ，下载 <a href="https://code.google.com/p/closure-compiler/">Google Closure Compiler</a> ，它帮你生成 .map 文件。 </p>
<p>运行带 Source Map 属性的 Closure Compiler ： </p>
<pre><code><figure class="highlight"><pre><span class="comment">java</span> <span class="literal">-</span><span class="comment">jar</span> <span class="comment">compiler</span>.<span class="comment">jar</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">js</span> <span class="comment">common</span>.<span class="comment">js</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">create_source_map</span> <span class="string">.</span><span class="comment">/common</span>.<span class="comment">js</span>.<span class="comment">map</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">source_map_format=V3</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">js_output_file</span> <span class="comment">common</span>.<span class="comment">min</span>.<span class="comment">js
</pre></figure></code></pre>
<p>在压缩后的 JS 文件底部加上映射文件的名字： sourceMappingURL </p>
<pre><code><figure class="highlight"><pre>//@ sourceMappingURL=common<span class="preprocessor">.js</span><span class="preprocessor">.map</span>
</pre></figure></code></pre>
<p>在 Chrome 开发工具，，“Settings 设置”菜单 -&gt; “General 常规”标签，激活“Enable Source Maps 启用 Source Maps ”。 </p>
<p>现在，当你调试 JavaScript 时，可以用未压缩的版本查找问题所在。 </p>
<h3>模拟User Agent</h3>
<p>有时伪装成不同的浏览器或设备用于调试，特别是某个网站用到了设备探测。 </p>
<p>在 Chrome ，打开设置菜单（右下角齿轮图标），选择“Overrides”选项，找到 “User Agent”选项。你可以选择内置的选项，也可以选择“Other”自己添加。如果你选择移动或平板设备， Chrome 将调整浏览器尺寸 - 取消勾选“Device Metrics”，很容易关掉此功能。 </p>
<p>在 Opera ，点击浏览器左下“面板”箭头（开发工具以上），选择 + ，然后选择“自定义”，到“按钮”标签选择“首选项”，然后拖住“识别为 Opera ”下拉框，拖到浏览器工具栏。 </p>
<h3>模拟触控设备</h3>
<p>Chrome 可以伪装成支持触控的设备，直接在浏览器模拟 touch 事件。在设置面板（Chrome 开发工具右下角齿轮图标），选择“Overrides”选项，选择“Emulate Touch Events 模拟触控事件”。 </p>
<p>在 Chrome Canary ，用个圆形代替了光标，可以用于区分处于哪种模式。 </p>
<h3>覆盖地理位置</h3>
<p>如果你的应用用到了 Geolocation ，模拟不同的位置会非常有用。在 Chrome ，“设置”菜单，选择“Overrides”标签，这里可以模拟不同的经度纬度，也可以模拟不可用的位置。 </p>
<p>在 <a href="https://maps.google.com/maps?showlabs=1">Google Maps Labs</a> 启用了坐标提示，你就可以从 Google Maps 获得位置的经纬度。 </p>
<h3>重写设备方向</h3>
<p>设备方向改变可以在 Chrome 中模拟。“Settings ”-&gt; “Overrides”，选择“Override Device Orientation”，在输入框输入新值。 </p>
<p>Alpha 代表沿 z 轴 0-360 度。 Beta 代表沿 x 轴 -180 到 180 度 - 前到后运动 Gamma 代表沿 y 轴 -90 到 90 度 - 左到右运动 </p>
<p>改变值将触发 <strong>deviceorientation</strong> 事件。 </p>
<h3>调试 Canvas 元素</h3>
<p>Chrome 可以用开发工具调试 canvas 元素，可用于 2D 和 WebGL canvas 项目。 </p>
<p>首先启用“Experiments”标签，地址栏输入 chrome://flags ，启用“Enable Developer Tools experiments”，按下“Relaunch Now”按钮应用改变。到设置面板，找到“Experiments”标签，选择“Canvas inspection”选项。 </p>
<p>现在访问“Profile”标签，你可以看到“Capture Canvas Frame 捕获 Canvas 帧”选项。使用期间可能需要重载页面。按下“Start 开始”捕获 canvas 应用的单个帧。你也可以点击下面的框，切换到“Consecutive Frames 连续帧”，你可以捕获多帧。 </p>
<p>每次访问 canvas Chrome 会创建日志，提供每次访问上下文的列表以及快照。你可以点击一个日志项重播那帧，看看哪些命令被调用，及它们在哪一行。 </p>
<h3>运行代码片段</h3>
<p>如果你发现同样的代码需要重复的运行，Chrome Canary（Chrome 29 已有此功能） 提供了便捷的“Snippets 片段”区域，你可以保存代码。 </p>
<p>在“Source”标签，“Sources”和“Content scripts”后面有个“Snippets ”标签，右键点击空区域，点“New”创建新的片段，写入一些代码，无论何时再想运行它时，右键点击选择“Run 运行”即可。 </p>
<p>Firefox 6 + 的代码片段速记器（开发工具右上角小本子图标）跟这很类似。 </p>
<h2>性能</h2>
<h3>禁用浏览器缓存</h3>
<p>每个浏览器都可以禁用网页的缓存，确保资源每次都从服务器加载。 </p>
<p>Chrome ，设置小齿轮里找，“General”-&gt; “Disable cache”。 </p>
<p>IE 菜单栏的“Cache 缓存”下面。 </p>
<p>Opera，点击网络标签清除缓存，选择“网络选项”-&gt; “禁用所有缓存” </p>
<p>Firebug，网络标签 -&gt; 下拉菜单“禁用浏览器缓存” </p>
<p>在任何浏览器呼出清除缓存对话框，Ctrl + Shift + Delete（Windows），Shift + Cmd + Backspace（Mac）。 </p>
<h3>排序网络请求找到瓶颈</h3>
<p>在网络标签按顺序显示每个请求的资源，点击每列的标题可以重新排序。 </p>
<p>大部分的浏览器在网络标签共享公共字段，你可以通过文件名；域名；资源类型；HTTP 状态；方法和资源大小这些字段排序。 </p>
<p>在 IE 中，文件名和域名字段合并了。 </p>
<p>Chrome 更进一步，点击“Timeline”字段显示额外的排序选项： </p>
<ul>
<li>Start Time 默认选项，按每个请求开始时间排序</li>
<li>Response Time 按网络请求获得响应的时间排序</li>
<li>End Time 按请求完成时间排序</li>
<li>Duration 按请求完成花费时间排序</li>
<li>Latency 浏览器初始请求到接收响应的时间总和。以等待时间排序，可以看看哪个资源占用了大量时间等待响应。等待时间依赖于用户距服务器的距离，设置 Content Delivery Networks （CDN）可以改善此时间。合并 CSS 和 JavaScript 文件，图像拼接可以减少资源请求数，因此减少总延迟。</li>
</ul>
<h3>网络时间轴导出为 HAR 文件</h3>
<p>HAR（HTTP 存档）文件可以用于各种性能分析技术和调试。测试提 bug 时可以附上 HAR 文件 - 开发人员可以在本地运行 HAR 数据查找问题原因。 </p>
<p>我们可以用 Chrome 开发工具导出网络标签时间轴，右键点击网络输入，选择“Save as HAR with Content”。 </p>
<p>Firebug 需要另安装插件 Net-export，此工具由 Firebug 开发主管和 HAR 格式创造者开发。 </p>
<p><a href="http://ericduran.github.io/chromeHAR/">chromeHAR</a> 是个在线工具，提供跟 Chrome 一样的时间轴界面，功能类似。 </p>
<h3>检查 DOMContentLoad 和 Load 事件</h3>
<p>Chrome 和 Safari （以及 Firebug 网络面板）的网络时间轴显示网页加载有多快，用一条线标记 DOMContentLoaded 和 load 事件触发的时机。 </p>
<ul>
<li>当浏览器解析文档完毕（但是其他资源比如图像，样式表可能未下载完毕）DOMContentLoaded 触发，它用蓝线标识。</li>
<li>当所有初始资源（图像，样式表，JavaScript）加载完毕，load 事件触发一次，它用红线标识。</li>
<li>当两个事件同时触发，标识线是紫色的。</li>
</ul>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/chrome-checking-domcontentloaded-and-loadevent.png" alt=""></p>
<p>在 Safari ，标识线是虚线。 </p>
<h3>重发送 XHR 请求</h3>
<p>如果希望重发送 XHR 请求，但不想刷新页面或重触发事件，可以右键点击资源，选择“Replay XHR”（Firebug 叫“Resend”）。 </p>
<h3>测量渲染性能和 FPS</h3>
<p>Chrome 提供了帧率时间轴，可以逐帧调试网站。 </p>
<p>要创建帧时间轴，首先打开 Chrome 开发工具，选择“Timeline”标签，底部黑色的圆形代表“record 记录”，按下开始时间轴记录，按第二次停止记录。记录的同时，你可以跟网页正常交互，帧模式会记录所有帧的行为。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/fps1.png" alt=""></p>
<p>时间轴图表每一条代表单帧动画，不同的颜色表示如下： 蓝色表示加载任务，黄色表示脚本任务，紫色表示渲染任务，绿色表示绘制任务，白色区域代表空闲时间。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/fps2.png" alt=""></p>
<p>时间轴图表下面是网页性能的瀑布图，帧显示在标题列，标题单元格还包含画这帧花费的毫秒数；相应的动作也记录在左侧。 </p>
<p>你可以拖动两个灰色的鼠标滑块，改变你想检查的帧的数量。 </p>
<p>悬停在时间轴的标题行显示帧的持续时间；FPS 数值；CPU 时间和与帧交互的合计时间。 </p>
<p>悬停在左侧的记录上面，可以看到每个任务的持续时间；还有其它有用信息。如果有页面相关的部分，则会高亮，有些任务被分组了，点击瀑布图的箭头查看。 </p>
<h2>移动端</h2>
<h3>开发工具调试 IOS</h3>
<p>把 IOS 设备连接到可用的 Mac，打开 Mac 和 IOS 设备的 Safari 。 </p>
<p>找到 Safari 的“Develop 开发”菜单，第一个菜单分隔线的后面应该是你要连接的 IOS 设备的名字。在子菜单选择你想调试的页面。 </p>
<p>Safari 的开发工具将以弹出窗口的式出现，你可以调试移动设备的站点了。 </p>
<h3>开发工具调试 Android</h3>
<p>你可以用Mac 上的 Chrome Canary 开发工具调试安卓设备上的公共和本地网站，你可以在手机上访问 Chrome 开发工具的广泛的特性集。 </p>
<p>首先，需要在安卓设备安装 <a href="https://play.google.com/store/apps/details?id=com.chrome.beta&amp;hl=en">Chrome BETA</a> 。 </p>
<p>然后，需要下载 <a href="https://github.com/repenaxa/ADBPlugin/raw/master/out/npADBPlugin-crx.crx">ADB 插件扩展</a>，安装到 Chrome Canary 上。从未在 Google Play 商店下载过的话，需要拖拽文件到扩展页 （<a href="chrome://extensions/">chrome://extensions/</a>）。 </p>
<p>确保已经在 <a href="chrome://flags">chrome://flags</a> 里面打开“Enable Developer Tools experiments 启用开发工具实验”。 </p>
<p>手机用 USB 线插到电脑上，在手机找到“设置”，选择“开发人员选项”，确保“USB 调试”选上。如果它已经选上，而你以前从未用过 USB 调试，取消选择，重选一次，确保它有此计算机的 MAC 地址。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/adroid.png" alt=""></p>
<p>现在到安卓上的 Chrome BETA ，点击菜单图标和“Settings 设置”，确保“Enable USB Web debugging 启用 USB Web 调试”启用。打开新标签。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/android-chrome.png" alt=""></p>
<p>在 Chrome Canary ，点击 ADB 插件图标，点击“Start ADB”，需要重启浏览器。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/1.png" alt=""></p>
<p>访问检查页（chrome://inspect ），找到设备（需要 Chrome Canary 28 +），找到要调试的标签。点击页面 URL 右侧的“Inspect 检查”链接。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/2.png" alt=""></p>
<p>弹出“Settings 设置”窗口，点击“Experiments 实验”标签，启用“Reverse Port Forwarding ”，你需要关闭窗口重启开发工具，“Port Forwarding”标签出现之前，再点“Inspect 查看”链接。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/3.png" alt=""></p>
<p>在 Port Forwarding 标签，输入想转发的端口（例如 9000），地址，应该可以映射到本地的电脑了。现在，在移动设备输入 localhost:端口号（如 localhost:9000），本地的站点应该加载到移动设备上了，并且可以调试了。 </p>
<p><img src="http://jinlong.github.io/images/post/devtoolsecrets/4.png" alt=""></p>
<h2>扩展</h2>
<h3>覆盖地理位置</h3>
<p>在 Firefox ，位置 API 可以像 Chrome 一样覆盖，需要 <a href="https://addons.mozilla.org/fr/firefox/addon/geolocater/">Geolocater 扩展</a> 。 </p>
<p>安装后到“Tools”工具菜单，“Geolocater”，“Manage 管理”，在这你可以通过浏览地图或搜索位置，直接添加“伪造的”地理位置。你可以覆盖先前预设的地理位置。可以到 <a href="http://html5demos.com/geo">html5demos for Geolocation</a> 页试试。 </p>

    
  </div>
  <footer>
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</div>
  </div>
  <div class="widget-wrapper">
    <aside id="sidebar">
  
  
    
      
      
    
      
      

<div class="widget tag first">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/css/">css</a><small>0</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>0</small></li>
  
  </ul>
</div>

    
      
      

<div class="widget tagcloud">
  <h3 class="title">Tag Cloud</h3>
  <div class="entry">
    <a href="/tags/css/" style="font-size: 15.00px;">css</a><a href="/tags/javascript/" style="font-size: 10.00px;">javascript</a>
  </div>
</div>

    
      
      

<div class="widget recent-posts">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2013/08/31/css居中-上午45014/">css居中</a>
      </li>
    
      <li>
        <a href="/2013/08/24/pro-active-steps-to-prevent-procrastination/">Pro-Active Steps to Prevent Procrastination</a>
      </li>
    
      <li>
        <a href="/2013/08/24/photoshop’s-role-in-a-web-design-workflow/">Photoshop’s Role in a Web Design Workflow</a>
      </li>
    
      <li>
        <a href="/2013/07/25/secrets-of-the-browser-developer-tools/">Secrets of the Browser Developer Tools</a>
      </li>
    
      <li>
        <a href="/2013/01/19/Hello/">Hello!</a>
      </li>
    
  </ul>
</div>

    
      
      

<div class="widget blogroll first newline">
  <h3 class="title">Links</h3>
  <ul class="entry">
  
    
    <li><a href="http://heroicyang.com/" target="_blank">Heroic Yang's Blog</a></li>
  
  </ul>
</div>

    
  
</aside>
<div class="clearfix"></div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2013 <a href="/">Rong Nie</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var disqus_shortname = 'nirgone';

  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>